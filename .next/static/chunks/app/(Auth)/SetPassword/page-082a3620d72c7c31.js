(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{121:(e,t,r)=>{"use strict";r.d(t,{FormSetPassword:()=>p});var a=r(5155),s=r(2115),n=r(8749),o=r(2657),l=r(2313),i=r(5695),c=r(3464),u=r(3281);let d=async e=>{if(!e.userId||!e.token||!e.newPassword)return{isSuccess:!1,displayMessage:"Datos incompletos",errorMessages:["userId, token o password vac\xedos"],result:null,status:400};try{let t=await u.a.post("/auth/reset-password",e,{withCredentials:!1});return{isSuccess:!0,displayMessage:"Contrase\xf1a actualizada correctamente",errorMessages:[],result:t.data.result,status:t.status}}catch(e){if(console.error("Login error:",e),c.A.isAxiosError(e)){var t,r,a,s,n,o,l,i;return{isSuccess:!1,displayMessage:null!=(o=null==(r=e.response)||null==(t=r.data)?void 0:t.message)?o:"Unknown error",errorMessages:[null!=(l=null==(s=e.response)||null==(a=s.data)?void 0:a.message)?l:"Unknown error"],result:null,status:null!=(i=null==(n=e.response)?void 0:n.status)?i:500}}return{isSuccess:!1,displayMessage:"Unexpected error",errorMessages:["Unexpected error"],result:null,status:500}}},p=()=>{let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),r=t.get("userId")||"",c=t.get("token")||"",[u,p]=(0,s.useState)(""),[g,m]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[j,N]=(0,s.useState)("");(0,s.useEffect)(()=>{r&&c||e.replace("/")},[r,c,e]);let S=async t=>{if(t.preventDefault(),u!==g)return void N("Las contrase\xf1as no coinciden");b(!0);let a=await d({userId:r,token:c,newPassword:u});N(a.displayMessage),b(!1),a.isSuccess&&(k(!0),setTimeout(()=>e.replace("/"),5e3))};return(0,a.jsx)(a.Fragment,{children:w?(0,a.jsxs)("p",{className:"text-center text-green-600 dark:text-green-400",children:[j," ",(0,a.jsx)("br",{}),"Ser\xe1s redirigido al login en 5 segundos..."]}):(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Nueva contrase\xf1a"}),(0,a.jsx)("input",{type:h?"text":"password",id:"password",value:u,onChange:e=>p(e.target.value),placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 text-base rounded-lg border bg-white dark:bg-gray-800 neutral:bg-gray-100 border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center",style:{top:"70%",transform:"translateY(-50%)"},children:h?(0,a.jsx)(n.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Confirmar contrase\xf1a"}),(0,a.jsx)("input",{type:h?"text":"password",id:"confirmPassword",value:g,onChange:e=>m(e.target.value),placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!y),className:"absolute inset-y-0 right-0 pr-3 flex items-center",style:{top:"70%",transform:"translateY(-50%)"},children:y?(0,a.jsx)(n.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsx)("button",{type:"submit",disabled:v,className:"w-full cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 active:bg-blue-800",children:v?(0,a.jsx)(l.A,{size:22,color:"#ffffff"}):"Guardar"}),j&&!w&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 text-center",children:j})]})})}},2313:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var a=r(2115),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var a=(e.match(/[^0-9]*$/)||"").toString();return s[a]?{value:t,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function o(e){var t=n(e);return"".concat(t.value).concat(t.unit)}var l=function(e,t,r){var a="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return a;var s=document.createElement("style");document.head.appendChild(s);var n=s.sheet,o="\n    @keyframes ".concat(a," {\n      ").concat(t,"\n    }\n  ");return n&&n.insertRule(o,0),a},i=function(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r},u=l("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),d=l("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");let p=function(e){var t=e.loading,r=e.color,s=void 0===r?"#000000":r,l=e.speedMultiplier,p=void 0===l?1:l,g=e.cssOverride,m=e.size,h=void 0===m?60:m,f=c(e,["loading","color","speedMultiplier","cssOverride","size"]),y=n(h),x=y.value,v=y.unit,b=i({display:"inherit",width:o(h),height:o(h),position:"relative"},void 0===g?{}:g),w=function(e){return{position:"absolute",top:"0",left:"0",width:"".concat(x).concat(v),height:"".concat(x).concat(v),border:"".concat(x/10).concat(v," solid ").concat(s),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat(1===e?u:d," ").concat(2/p,"s 0s infinite linear")}};return void 0===t||t?a.createElement("span",i({style:b},f),a.createElement("span",{style:w(1)}),a.createElement("span",{style:w(2)})):null}},2657:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3281:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var a=r(3464);r(9509).env.NODE_TLS_REJECT_UNAUTHORIZED="0";let s=a.A.create({baseURL:"https://api.apoloenergies.es/api/apolo/v1",responseType:"json",withCredentials:!0})},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},8580:(e,t,r)=>{Promise.resolve().then(r.bind(r,121))},8749:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...p}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...c}=r;return(0,a.createElement)(l,{ref:o,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return r.displayName=s(e),r}}},e=>{e.O(0,[641,464,441,964,358],()=>e(e.s=8580)),_N_E=e.O()}]);